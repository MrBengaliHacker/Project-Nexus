{% extends "base.html" %}
{% block title %}Post Announcement{% endblock %}
{% block content %}
<div class="max-w-xl mx-auto p-4">
  <h1 class="text-2xl font-bold mb-4">{{ announcement and 'Edit' or 'Post' }} Announcement</h1>
  <form method="POST" enctype="multipart/form-data" class="space-y-4">
    <div>
      <label for="title" class="block font-semibold">Title:</label>
      <input type="text" name="title" id="title" required class="border rounded px-2 py-1 w-full" value="{{ announcement.title if announcement else '' }}">
    </div>
    <div>
      <label for="content" class="block font-semibold">Content:</label>
      <textarea name="content" id="content" required class="border rounded px-2 py-1 w-full">{{ announcement.content if announcement else '' }}</textarea>
    </div>
    <div>
      <label for="category" class="block font-semibold">Category:</label>
      <input type="text" name="category" id="category" class="border rounded px-2 py-1 w-full" value="{{ announcement.category if announcement else '' }}">
    </div>
    <div>
      <label for="tags" class="block font-semibold">Tags (comma separated):</label>
      <input type="text" name="tags" id="tags" class="border rounded px-2 py-1 w-full" value="{{ tags_str if tags_str is defined else '' }}">
    </div>
    <div>
      <label for="is_pinned" class="inline-flex items-center">
        <input type="checkbox" name="is_pinned" id="is_pinned" {% if announcement and announcement.is_pinned %}checked{% endif %}>
        <span class="ml-2">Pin this announcement</span>
      </label>
    </div>
    <div>
      <label for="file" class="block font-semibold">Attachment (optional):</label>
      <input type="file" name="file" id="file" class="border rounded px-2 py-1 w-full">
      {% if announcement and announcement.file_url %}
        <a href="{{ announcement.file_url }}" class="text-blue-600 underline" target="_blank">Current Attachment</a>
      {% endif %}
    </div>
    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">{{ announcement and 'Update' or 'Post' }}</button>
  </form>
</div>
{% endblock %}
