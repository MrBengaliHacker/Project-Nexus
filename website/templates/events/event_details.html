{% extends 'base.html' %}
{% block content %}
<div class="max-w-2xl mx-auto p-4">
  <div class="mb-4">
    <a href="{{ url_for('events.event_list') }}" class="text-blue-600 hover:underline">&larr; Back to Events</a>
  </div>
  <div class="border rounded-lg p-6 bg-white shadow">
    {% if event.file_url %}
      <img src="{{ event.file_url }}" alt="Poster" class="h-48 w-full object-cover mb-4 rounded">
    {% endif %}
    <h2 class="text-2xl font-bold mb-2">{{ event.title }}</h2>
    <div class="text-gray-600 mb-2">{{ event.start_time.strftime('%b %d, %Y %I:%M %p') }} - {{ event.end_time.strftime('%b %d, %Y %I:%M %p') }}</div>
    <div class="mb-2"><span class="font-semibold">Location:</span> {{ event.location }}</div>
    <div class="mb-2"><span class="font-semibold">Category:</span> {{ event.category }}</div>
    <div class="mb-4">{{ event.description }}</div>
    {% if event.registration_link %}
      <div class="mb-4">
        <a href="{{ event.registration_link }}" target="_blank" class="bg-blue-600 text-white px-4 py-2 rounded">Registration Link</a>
      </div>
    {% endif %}
    <div class="mb-4 text-sm text-gray-500">Posted by: {{ poster.name }} ({{ poster.role }})</div>
    {% if current_user.role == 'student' %}
      <form method="POST" action="{{ url_for('events.event_rsvp', event_id=event.id) }}">
        {% if is_registered %}
          <span class="inline-block bg-green-100 text-green-800 px-3 py-1 rounded">Registered</span>
        {% else %}
          <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded">RSVP</button>
        {% endif %}
      </form>
    {% endif %}
  </div>
</div>
{% endblock %}
